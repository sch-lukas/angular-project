# 03 - Detailseite Ã¶ffnen

> **Szenario:** Ein Nutzer klickt auf ein Buch im Karussell oder in der Suchliste und wird zur Detailseite weitergeleitet.

---

## ğŸ”„ Ablauf-Diagramm

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. NUTZER-AKTION: Klick auf Buch-Card                                                â”‚
â”‚                                                                                      â”‚
â”‚    landing-page.component.ts oder search.component.ts:                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ <div class="book-card" (click)="goToBook(book.id)">                          â”‚  â”‚
â”‚    â”‚     <img [src]="book.coverUrl" />                                            â”‚  â”‚
â”‚    â”‚     <h5>{{ book.titel?.titel }}</h5>                                         â”‚  â”‚
â”‚    â”‚ </div>                                                                       â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚ goToBook(id: number): void {                                                 â”‚  â”‚
â”‚    â”‚     this.router.navigate(['/detail', id]);  // z.B. /detail/1042             â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ANGULAR ROUTER: Route matchen                                                     â”‚
â”‚                                                                                      â”‚
â”‚    main.ts:                                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ const routes: Routes = [                                                     â”‚  â”‚
â”‚    â”‚     { path: 'detail/:id', component: DetailComponent },  â—„â”€â”€ Route matcht   â”‚  â”‚
â”‚    â”‚     ...                                                                      â”‚  â”‚
â”‚    â”‚ ];                                                                           â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                      â”‚
â”‚    URL: /detail/1042  â†’  :id Parameter = "1042"                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. DETAIL-COMPONENT: Initialisierung                                                 â”‚
â”‚                                                                                      â”‚
â”‚    detail.component.ts:                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ export class DetailComponent implements OnInit {                             â”‚  â”‚
â”‚    â”‚     buch: BuchItem | null = null;                                            â”‚  â”‚
â”‚    â”‚     isLoading = true;                                                        â”‚  â”‚
â”‚    â”‚     relatedBooks: BuchItem[] = [];                                           â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     constructor(                                                             â”‚  â”‚
â”‚    â”‚         private route: ActivatedRoute,      // FÃ¼r URL-Parameter             â”‚  â”‚
â”‚    â”‚         private api: BuchApiService,        // FÃ¼r API-Calls                 â”‚  â”‚
â”‚    â”‚         private cartService: CartService,   // Warenkorb                     â”‚  â”‚
â”‚    â”‚         private wishlistService: WishlistService  // Merkliste               â”‚  â”‚
â”‚    â”‚     ) {}                                                                     â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     ngOnInit(): void {                                                       â”‚  â”‚
â”‚    â”‚         this.route.paramMap.subscribe(params => {                            â”‚  â”‚
â”‚    â”‚             const id = params.get('id');                                     â”‚  â”‚
â”‚    â”‚             if (id) this.loadBuch(Number(id));                               â”‚  â”‚
â”‚    â”‚         });                                                                  â”‚  â”‚
â”‚    â”‚     }                                                                        â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. BUCH LADEN: API-Call via BuchApiService                                           â”‚
â”‚                                                                                      â”‚
â”‚    detail.component.ts:                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ loadBuch(id: number): void {                                                 â”‚  â”‚
â”‚    â”‚     this.isLoading = true;                                                   â”‚  â”‚
â”‚    â”‚     this.api.getById(id).subscribe({                                         â”‚  â”‚
â”‚    â”‚         next: (buch) => {                                                    â”‚  â”‚
â”‚    â”‚             this.buch = buch;                                                â”‚  â”‚
â”‚    â”‚             this.isLoading = false;                                          â”‚  â”‚
â”‚    â”‚             this.loadRelatedBooks();  // Ã„hnliche BÃ¼cher laden               â”‚  â”‚
â”‚    â”‚         },                                                                   â”‚  â”‚
â”‚    â”‚         error: (err) => {                                                    â”‚  â”‚
â”‚    â”‚             this.error = 'Buch nicht gefunden';                              â”‚  â”‚
â”‚    â”‚             this.isLoading = false;                                          â”‚  â”‚
â”‚    â”‚         }                                                                    â”‚  â”‚
â”‚    â”‚     });                                                                      â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. BUCH-API-SERVICE: GraphQL Query fÃ¼r einzelnes Buch                                â”‚
â”‚                                                                                      â”‚
â”‚    buch-api.service.ts:                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ getById(id: number): Observable<BuchItem> {                                  â”‚  â”‚
â”‚    â”‚     return executeGraphQL<{ buch: BuchItem }>(                               â”‚  â”‚
â”‚    â”‚         this.http,                                                           â”‚  â”‚
â”‚    â”‚         BUCH_BY_ID_QUERY,      // Detaillierte Query mit allen Feldern       â”‚  â”‚
â”‚    â”‚         { id: String(id) }                                                   â”‚  â”‚
â”‚    â”‚     ).pipe(                                                                  â”‚  â”‚
â”‚    â”‚         map(response => {                                                    â”‚  â”‚
â”‚    â”‚             if (!response.data?.buch) throw new Error('Nicht gefunden');     â”‚  â”‚
â”‚    â”‚             return response.data.buch;                                       â”‚  â”‚
â”‚    â”‚         })                                                                   â”‚  â”‚
â”‚    â”‚     );                                                                       â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. GRAPHQL QUERY: Detaillierte Buch-Abfrage                                          â”‚
â”‚                                                                                      â”‚
â”‚    graphql-queries.ts - BUCH_BY_ID_QUERY:                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ query BuchById($id: ID!) {                                                   â”‚  â”‚
â”‚    â”‚     buch(id: $id) {                                                          â”‚  â”‚
â”‚    â”‚         id                                                                   â”‚  â”‚
â”‚    â”‚         version                                                              â”‚  â”‚
â”‚    â”‚         isbn                                                                 â”‚  â”‚
â”‚    â”‚         rating                                                               â”‚  â”‚
â”‚    â”‚         art                                                                  â”‚  â”‚
â”‚    â”‚         preis                                                                â”‚  â”‚
â”‚    â”‚         rabatt(short: false)     # VollstÃ¤ndiger Rabatt-Wert                 â”‚  â”‚
â”‚    â”‚         lieferbar                                                            â”‚  â”‚
â”‚    â”‚         datum                                                                â”‚  â”‚
â”‚    â”‚         homepage                                                             â”‚  â”‚
â”‚    â”‚         schlagwoerter                                                        â”‚  â”‚
â”‚    â”‚         beschreibung             # NEU: Produktbeschreibung                  â”‚  â”‚
â”‚    â”‚         autor                    # NEU: Autor-Name                           â”‚  â”‚
â”‚    â”‚         autorBiographie          # NEU: Autor-Biographie                     â”‚  â”‚
â”‚    â”‚         coverUrl                                                             â”‚  â”‚
â”‚    â”‚         erzeugt                                                              â”‚  â”‚
â”‚    â”‚         aktualisiert                                                         â”‚  â”‚
â”‚    â”‚         titel {                                                              â”‚  â”‚
â”‚    â”‚             titel                                                            â”‚  â”‚
â”‚    â”‚             untertitel                                                       â”‚  â”‚
â”‚    â”‚         }                                                                    â”‚  â”‚
â”‚    â”‚         abbildungen {            # ZusÃ¤tzliche Bilder                        â”‚  â”‚
â”‚    â”‚             id                                                               â”‚  â”‚
â”‚    â”‚             beschriftung                                                     â”‚  â”‚
â”‚    â”‚             contentType                                                      â”‚  â”‚
â”‚    â”‚             pfad                                                             â”‚  â”‚
â”‚    â”‚         }                                                                    â”‚  â”‚
â”‚    â”‚     }                                                                        â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼  HTTP POST /graphql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. BACKEND: GraphQL Resolver - findById                                              â”‚
â”‚                                                                                      â”‚
â”‚    src/buch/resolver/query.ts:                                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ @Query('buch')                                                               â”‚  â”‚
â”‚    â”‚ @Public()                                                                    â”‚  â”‚
â”‚    â”‚ async findById(@Args() { id }: IdInput) {                                    â”‚  â”‚
â”‚    â”‚     this.#logger.debug('findById: id=%s', id);                               â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     const buch = await this.#service.findById({                              â”‚  â”‚
â”‚    â”‚         id: Number(id),                                                      â”‚  â”‚
â”‚    â”‚         mitAbbildungen: true  // Abbildungen mitladen                        â”‚  â”‚
â”‚    â”‚     });                                                                      â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     return buch;                                                             â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. BUCH-SERVICE: Datenbankabfrage                                                    â”‚
â”‚                                                                                      â”‚
â”‚    src/buch/service/buch-service.ts:                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ async findById({ id, mitAbbildungen }) {                                     â”‚  â”‚
â”‚    â”‚     const include = mitAbbildungen                                           â”‚  â”‚
â”‚    â”‚         ? { titel: true, abbildungen: true }                                 â”‚  â”‚
â”‚    â”‚         : { titel: true };                                                   â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     const buch = await this.#prisma.buch.findUnique({                        â”‚  â”‚
â”‚    â”‚         where: { id },                                                       â”‚  â”‚
â”‚    â”‚         include                                                              â”‚  â”‚
â”‚    â”‚     });                                                                      â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     if (!buch) {                                                             â”‚  â”‚
â”‚    â”‚         throw new NotFoundException(`Buch mit ID ${id} nicht gefunden`);     â”‚  â”‚
â”‚    â”‚     }                                                                        â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚     return buch;                                                             â”‚  â”‚
â”‚    â”‚ }                                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. PRISMA: SQL Query mit JOINs                                                       â”‚
â”‚                                                                                      â”‚
â”‚    Generiertes SQL:                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ SELECT                                                                       â”‚  â”‚
â”‚    â”‚     b.id, b.version, b.isbn, b.rating, b.art, b.preis, b.rabatt,             â”‚  â”‚
â”‚    â”‚     b.lieferbar, b.datum, b.homepage, b.schlagwoerter, b.beschreibung,       â”‚  â”‚
â”‚    â”‚     b.autor, b.autor_biographie, b.cover_url, b.erzeugt, b.aktualisiert,     â”‚  â”‚
â”‚    â”‚     t.titel, t.untertitel,                                                   â”‚  â”‚
â”‚    â”‚     a.id as abb_id, a.beschriftung, a.content_type, a.pfad                   â”‚  â”‚
â”‚    â”‚ FROM buch.buch b                                                             â”‚  â”‚
â”‚    â”‚ LEFT JOIN buch.titel t ON b.id = t.buch_id                                   â”‚  â”‚
â”‚    â”‚ LEFT JOIN buch.abbildung a ON b.id = a.buch_id                               â”‚  â”‚
â”‚    â”‚ WHERE b.id = 1042                                                            â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. RESPONSE: VollstÃ¤ndige Buchdaten                                                 â”‚
â”‚                                                                                      â”‚
â”‚    GraphQL Response:                                                                 â”‚
â”‚    {                                                                                 â”‚
â”‚        "data": {                                                                     â”‚
â”‚            "buch": {                                                                 â”‚
â”‚                "id": 1042,                                                           â”‚
â”‚                "version": 0,                                                         â”‚
â”‚                "isbn": "978-3-123-45678-9",                                          â”‚
â”‚                "rating": 5,                                                          â”‚
â”‚                "art": "HARDCOVER",                                                   â”‚
â”‚                "preis": 39.99,                                                       â”‚
â”‚                "rabatt": 0.15,                                                       â”‚
â”‚                "lieferbar": true,                                                    â”‚
â”‚                "datum": "2024-01-15",                                                â”‚
â”‚                "homepage": "https://example.com",                                    â”‚
â”‚                "schlagwoerter": ["TypeScript", "Angular"],                           â”‚
â”‚                "beschreibung": "Ein umfassendes Buch Ã¼ber...",                       â”‚
â”‚                "autor": "Max Mustermann",                                            â”‚
â”‚                "autorBiographie": "Max Mustermann ist...",                           â”‚
â”‚                "coverUrl": "assets/covers/1042.svg",                                 â”‚
â”‚                "titel": {                                                            â”‚
â”‚                    "titel": "Angular Masterclass",                                   â”‚
â”‚                    "untertitel": "Von Zero to Hero"                                  â”‚
â”‚                },                                                                    â”‚
â”‚                "abbildungen": [                                                      â”‚
â”‚                    { "id": 1, "beschriftung": "Cover", "pfad": "..." }               â”‚
â”‚                ]                                                                     â”‚
â”‚            }                                                                         â”‚
â”‚        }                                                                             â”‚
â”‚    }                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. TEMPLATE RENDERING: Produktseite anzeigen                                        â”‚
â”‚                                                                                      â”‚
â”‚    detail.component.ts (Template-Auszug):                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ <!-- Titel und Rating -->                                                    â”‚  â”‚
â”‚    â”‚ <h1 class="product-title">{{ buch.titel?.titel }}</h1>                       â”‚  â”‚
â”‚    â”‚ <span class="badge">â­ {{ buch.rating }} / 5</span>                          â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚ <!-- Cover und Preis -->                                                     â”‚  â”‚
â”‚    â”‚ <img [src]="getCoverUrl()" class="cover-image" />                            â”‚  â”‚
â”‚    â”‚ <span class="product-price">{{ buch.preis | currency:'EUR' }}</span>         â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚ <!-- Call-to-Action Buttons -->                                              â”‚  â”‚
â”‚    â”‚ <button (click)="addToCart()" class="btn btn-success">                       â”‚  â”‚
â”‚    â”‚     ğŸ›’ In den Warenkorb                                                      â”‚  â”‚
â”‚    â”‚ </button>                                                                    â”‚  â”‚
â”‚    â”‚ <button (click)="toggleWishlist()" class="btn">                              â”‚  â”‚
â”‚    â”‚     {{ isOnWishlist() ? 'â¤ï¸' : 'ğŸ¤' }} Merken                                â”‚  â”‚
â”‚    â”‚ </button>                                                                    â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚ <!-- Beschreibung -->                                                        â”‚  â”‚
â”‚    â”‚ <div class="description-section">                                            â”‚  â”‚
â”‚    â”‚     <h3>ğŸ“– Produktbeschreibung</h3>                                          â”‚  â”‚
â”‚    â”‚     <p>{{ buch.beschreibung }}</p>                                           â”‚  â”‚
â”‚    â”‚ </div>                                                                       â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚ <!-- Autor-Biographie -->                                                    â”‚  â”‚
â”‚    â”‚ <div class="author-section">                                                 â”‚  â”‚
â”‚    â”‚     <h3>âœï¸ Ãœber den Autor</h3>                                               â”‚  â”‚
â”‚    â”‚     <p>{{ buch.autorBiographie }}</p>                                        â”‚  â”‚
â”‚    â”‚ </div>                                                                       â”‚  â”‚
â”‚    â”‚                                                                              â”‚  â”‚
â”‚    â”‚ <!-- Ã„hnliche BÃ¼cher Karussell -->                                           â”‚  â”‚
â”‚    â”‚ <app-book-carousel [books]="relatedBooks" title="Ã„hnliche BÃ¼cher" />         â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 12. ERGEBNIS: Fertige Detailseite                                                    â”‚
â”‚                                                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚  â”‚
â”‚    â”‚  â•‘  ğŸ  Buch SPA    Suche    Warenkorb    Login        ğŸŒ™                 â•‘  â”‚  â”‚
â”‚    â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚  â”‚
â”‚    â”‚  â•‘  â† ZurÃ¼ck zur Suche                                                   â•‘  â”‚  â”‚
â”‚    â”‚  â•‘                                                                       â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ Angular Masterclass                        â­ 5/5  ğŸ’°SchnÃ¤ppchen â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ Von Zero to Hero                                                â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â‚¬39,99  -15% Rabatt                             â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ â”‚           â”‚   âœ“ Sofort lieferbar   HARDCOVER                  â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ â”‚  [COVER]  â”‚                                                   â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ â”‚           â”‚   [ğŸ›’ In den Warenkorb]  [â¤ï¸ Merken]              â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚                                                                 â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ ğŸ“– Produktbeschreibung                                          â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ Ein umfassendes Buch Ã¼ber Angular...                            â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚                                                                 â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ âœï¸ Ãœber den Autor                                               â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â”‚ Max Mustermann ist Softwareentwickler...                        â”‚ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘  â”‚  â”‚
â”‚    â”‚  â•‘                                                                       â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  ğŸ“š Ã„hnliche BÃ¼cher                                                   â•‘  â”‚  â”‚
â”‚    â”‚  â•‘  â—„ [ğŸ“•][ğŸ“—][ğŸ“˜][ğŸ“™] â–º                                               â•‘  â”‚  â”‚
â”‚    â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Beteiligte Dateien

### Frontend

| Datei                                           | Rolle                          |
| ----------------------------------------------- | ------------------------------ |
| `frontend/src/app/detail.component.ts`          | Haupt-Komponente (1756 Zeilen) |
| `frontend/src/app/buch-api.service.ts`          | `getById()` Methode            |
| `frontend/src/app/graphql-queries.ts`           | `BUCH_BY_ID_QUERY`             |
| `frontend/src/app/book-carousel.component.ts`   | FÃ¼r "Ã„hnliche BÃ¼cher"          |
| `frontend/src/app/cart/cart.service.ts`         | Warenkorb-Integration          |
| `frontend/src/app/wishlist/wishlist.service.ts` | Merklisten-Integration         |

### Backend

| Datei                                         | Rolle                      |
| --------------------------------------------- | -------------------------- |
| `src/buch/resolver/query.ts`                  | `findById` Resolver        |
| `src/buch/service/buch-service.ts`            | `findById` Service-Methode |
| `src/config/resources/graphql/schema.graphql` | Schema fÃ¼r `buch` Query    |

---

## ğŸ” Wichtige Code-Stellen

### 1. Route Parameter auslesen

```typescript
// detail.component.ts
ngOnInit(): void {
    this.route.paramMap.subscribe(params => {
        const id = params.get('id');
        if (id) this.loadBuch(Number(id));
    });
}
```

### 2. Warenkorb-Button

```typescript
// detail.component.ts
addToCart(): void {
    if (!this.buch) return;

    this.cartService.addToCart({
        id: this.buch.id!,
        titel: this.buch.titel?.titel || 'Unbekannt',
        preis: this.buch.preis || 0,
        coverUrl: this.getCoverUrl()
    });

    this.addToCartSuccess = true;
    setTimeout(() => this.addToCartSuccess = false, 3000);
}
```

### 3. Merkliste Toggle

```typescript
// detail.component.ts
toggleWishlist(): void {
    if (!this.buch?.id) return;
    this.wishlistService.toggle(this.buch);
}

isOnWishlist(): boolean {
    return this.buch?.id ? this.wishlistService.isOnWishlist(this.buch.id) : false;
}
```

---

## âš¡ Besonderheiten

1. **Lazy Loading**: Ã„hnliche BÃ¼cher werden erst nach Hauptbuch geladen
2. **Version-Feld**: FÃ¼r Optimistic Locking bei Updates
3. **Rabatt-Berechnung**: `rabatt(short: false)` liefert vollen Dezimalwert
4. **Cover-URL Fallback**: Placeholder wenn kein Cover vorhanden
5. **SchlagwÃ¶rter als Badges**: Array wird zu einzelnen Bootstrap-Badges

---

_Weiter zu: [04-login-authentifizierung.md](04-login-authentifizierung.md)_
