<div
  class="app-shell"
  [class.theme-dark]="isDarkMode"
  [class.theme-light]="!isDarkMode"
>
  <header class="app-header">
    <div class="app-header-left">
      <img
        src="assets/logo-buch-spa.svg"
        alt="Buch SPA Logo"
        class="app-logo"
      />
    </div>
    <div class="app-header-right">
      <nav class="app-nav">
        <a
          routerLink="/"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          >Home</a
        >
        <a
          routerLink="/search"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          >Suche</a
        >
        <!-- Zeige "Neu" nur f√ºr eingeloggte Benutzer -->
        <a
          *ngIf="isLoggedIn$ | async"
          routerLink="/new"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          >Neu</a
        >
        <!-- Warenkorb mit Badge -->
        <a
          routerLink="/cart"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="cart-link"
        >
          üõí Warenkorb
          <span *ngIf="(cartItemCount$ | async) ?? 0 > 0" class="cart-badge">
            {{ cartItemCount$ | async }}
          </span>
        </a>
        <!-- Merkliste mit Badge -->
        <a
          routerLink="/wishlist"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="wishlist-link"
        >
          ‚ù§Ô∏è Merkliste
          <span
            *ngIf="(wishlistItemCount$ | async) ?? 0 > 0"
            class="wishlist-badge"
          >
            {{ wishlistItemCount$ | async }}
          </span>
        </a>
        <!-- Zeige Login oder Logout je nach Status -->
        <a
          *ngIf="!(isLoggedIn$ | async)"
          routerLink="/login"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          >Login</a
        >
        <button
          *ngIf="isLoggedIn$ | async"
          type="button"
          class="logout-btn"
          (click)="onLogout()"
        >
          Logout
        </button>
      </nav>
      <button type="button" class="theme-toggle" (click)="toggleDarkMode()">
        {{ isDarkMode ? 'Dark' : 'Light' }}
      </button>
    </div>
  </header>
  <main class="app-main">
    <router-outlet></router-outlet>
  </main>
  <footer class="app-footer">
    <span>¬© Buch SPA</span>
    <span class="footer-links">
      <a routerLink="/kontakt" routerLinkActive="active">Kontakt</a>
      <a routerLink="/impressum" routerLinkActive="active">Impressum</a>
    </span>
  </footer>
</div>
